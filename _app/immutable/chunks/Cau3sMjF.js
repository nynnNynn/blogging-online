import{b as N,h as o,i as I,E as A,H as S,r as R,s as U,j as v,k as p,a as h,p as g,U as D,c as k,t as q,m as x,n as y,o as F,q as H,v as L}from"./6CqvH31B.js";import{s as O,g as j}from"./CsdOU87w.js";function M(s,a,n=!1){o&&I();var e=s,r=null,t=null,u=D,m=n?A:0,l=!1;const E=(c,i=!0)=>{l=!0,b(i,c)},b=(c,i)=>{if(u===(u=c))return;let d=!1;if(o){const T=e.data===S;!!u===T&&(e=R(),U(e),v(!1),d=!0)}u?(r?p(r):i&&(r=h(()=>i(e))),t&&g(t,()=>{t=null})):(t?p(t):i&&(t=h(()=>i(e))),r&&g(r,()=>{r=null})),d&&v(!0)};N(()=>{l=!1,a(E),l||b(null,null)},m),o&&(e=k)}let f=!1,_=Symbol();function P(s,a,n){const e=n[a]??(n[a]={store:null,source:F(void 0),unsubscribe:y});if(e.store!==s&&!(_ in n))if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=y;else{var r=!0;e.unsubscribe=O(s,t=>{r?e.source.v=t:L(e.source,t)}),r=!1}return s&&_ in n?j(s):H(e.source)}function Y(){const s={};function a(){q(()=>{for(var n in s)s[n].unsubscribe();x(s,_,{enumerable:!1,value:!0})})}return[s,a]}function Z(s){var a=f;try{return f=!1,[s(),f]}finally{f=a}}export{P as a,Z as c,M as i,Y as s};
